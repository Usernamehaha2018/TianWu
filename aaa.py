#             {'ecmp0.3': [36388995.818930045, 36557615.48917749, 47563539.54938272, 22109964.51002227], 'letflow0.3': [36475920.09670782, 41407396.872294374, 50010409.666666664, 24560907.975501113], 'drill0.4': [18496562.331699345, 41956727.115771815, 68701480.63664596, 36536262.704791345], 'letflow0.4': [19560348.97385621, 38980703.5385906, 54421134.44409938, 32238993.061823804], 'clove': [], 'drill': [], 'letflow': [], 'ecmp': [], 'drill0.3': [44907250.78395062, 29677679.954545453, 58547413.20164609, 20973851.082405344], 'clove0.4': [24179849.27124183, 42559391.944630876, 56739234.38043478, 33419407.035548687], 'clove0.3': [36163263.343621396, 32909446.456709955, 60605955.42386831, 27236937.815144766], 'ecmp0.4': [19981536.810457516, 45763302.66442953, 58525824.24068323, 37646083.08037094]} 
#  {'ecmp0.3': [83273.05349794238, 83832.75757575757, 86196.23045267489, 82596.26280623607], 'letflow0.3': [83776.13580246913, 82980.91991341992, 83417.5, 82374.71937639198], 'drill0.4': [82346.08823529411, 82974.05201342281, 83096.21739130435, 82676.56105100464], 'letflow0.4': [82742.7794117647, 86167.7701342282, 89477.43167701863, 84585.71097372488], 'clove': [], 'drill': [], 'letflow': [], 'ecmp': [], 'drill0.3': [82759.51234567902, 82845.53463203463, 82630.27777777778, 82254.49443207127], 'clove0.4': [82681.60620915033, 83982.5167785235, 89126.73447204969, 83853.03863987635], 'clove0.3': [83247.33539094651, 84389.21212121213, 83328.61728395062, 82451.58574610246], 'ecmp0.4': [82742.03594771241, 84755.4966442953, 87671.12577639752, 83347.8145285935]} 
#  {'ecmp0.3': [765159627, 1508305534, 903494999, 701576101], 'drill0.3': [983241327, 859055264, 1311768253, 651682907], 'drill0.4': [613606943, 1359964750, 1465404770, 1078481283], 'letflow0.4': [590060158, 1226015522, 1208545009, 956294097], 'clove0.4': [981452297, 1315024900, 1163285784, 926308661], 'letflow0.3': [763541790, 1691309462, 1176573351, 770025874], 'clove0.3': [771471445, 871427549, 1627777990, 872003502], 'ecmp0.4': [729433279, 1430509617, 1435252333, 901907081]}

# {'ecmp0.5': [37492388.48582474, 51242529.34149484, 39772149.1126071, 20681270.598214287], 'drill0.6': [33263492.502590675, 32615339.676130388, 41994374.12839249, 73437282.82266527], 'drill': [], 'letflow': [], 'ecmp0.6': [31075906.259067357, 31033295.108307045, 37471737.04592902, 58936988.64113326], 'letflow0.5': [33306570.534793813, 53392098.328608245, 38294192.0624235, 20724477.049744897], 'clove0.6': [30573686.60207254, 29610572.36382755, 40868060.306889355, 62111587.572927594], 'clove': [], 'drill0.5': [38195364.797680415, 47260176.206185564, 41837655.67074663, 21484339.13392857], 'letflow0.6': [28575849.402072538, 29375371.079915877, 36058853.798538625, 65857674.451206714], 'ecmp': [], 'clove0.5': [30656221.44201031, 50130839.541237116, 42496162.28641371, 20811243.089285713]} 
#  {'ecmp0.5': [82857.79896907216, 88246.55798969071, 90286.81150550795, 83162.96428571429], 'drill0.6': [82813.13989637306, 82832.73606729758, 82828.8350730689, 83262.94648478489], 'drill': [], 'letflow': [], 'ecmp0.6': [85497.05595854922, 85299.94006309149, 85760.24634655533, 94482.13536201468], 'letflow0.5': [82952.40206185567, 86126.57731958762, 87078.13953488372, 83447.10841836735], 'clove0.6': [86583.09119170984, 84950.73080967403, 84291.34133611691, 100813.6610703043], 'clove': [], 'drill0.5': [82436.45360824742, 82872.39304123711, 83140.35618115055, 82819.0612244898], 'letflow0.6': [85271.08911917098, 84296.7476340694, 86155.14822546973, 98185.3242392445], 'ecmp': [], 'clove0.5': [82994.25386597938, 87072.47551546391, 89626.85556915545, 83707.48979591837]} 
#  {'letflow0.5': [1034232605, 1663577141, 1120906027, 847017044], 'clove0.6': [935285658, 836677995, 1154187365, 1730899905], 'drill0.6': [974074927, 1060743973, 1006969597, 1947219902], 'ecmp0.5': [1208370880, 1355688998, 1059755498, 977188174], 'letflow0.6': [882250417, 872194937, 975833582, 1702954164], 'ecmp0.6': [892777114, 1093964198, 967173459, 1410452735], 'drill0.5': [1422979839, 1737791740, 1077025153, 788390275], 'clove0.5': [1050067702, 1739262750, 1099328703, 781218344]}
from re import M
import xml.etree.ElementTree as ET
import matplotlib.pyplot as plt
import numpy as np
from xml.dom import minidom
import seaborn as sns
import pandas as pdq
from matplotlib.lines import Line2D
import matplotlib.colors as mcolors
# import mpl_scatter_density

from matplotlib.pyplot import MultipleLocator
import matplotlib
if __name__ == "__main__":
    btms1 = {'ecmp0.3': [36388995.818930045, 36557615.48917749, 47563539.54938272, 22109964.51002227], 'letflow0.3': [36475920.09670782, 41407396.872294374, 50010409.666666664, 24560907.975501113], 'drill0.4': [18496562.331699345, 41956727.115771815, 68701480.63664596, 36536262.704791345], 'letflow0.4': [19560348.97385621, 38980703.5385906, 54421134.44409938, 32238993.061823804], 'clove': [], 'drill': [], 'letflow': [], 'ecmp': [], 'drill0.3': [44907250.78395062, 29677679.954545453, 58547413.20164609, 20973851.082405344], 'clove0.4': [24179849.27124183, 42559391.944630876, 56739234.38043478, 33419407.035548687], 'clove0.3': [36163263.343621396, 32909446.456709955, 60605955.42386831, 27236937.815144766], 'ecmp0.4': [19981536.810457516, 45763302.66442953, 58525824.24068323, 37646083.08037094]} 
    tops1 = {'ecmp0.3': [83273.05349794238, 83832.75757575757, 86196.23045267489, 82596.26280623607], 'letflow0.3': [83776.13580246913, 82980.91991341992, 83417.5, 82374.71937639198], 'drill0.4': [82346.08823529411, 82974.05201342281, 83096.21739130435, 82676.56105100464], 'letflow0.4': [82742.7794117647, 86167.7701342282, 89477.43167701863, 84585.71097372488], 'clove': [], 'drill': [], 'letflow': [], 'ecmp': [], 'drill0.3': [82759.51234567902, 82845.53463203463, 82630.27777777778, 82254.49443207127], 'clove0.4': [82681.60620915033, 83982.5167785235, 89126.73447204969, 83853.03863987635], 'clove0.3': [83247.33539094651, 84389.21212121213, 83328.61728395062, 82451.58574610246], 'ecmp0.4': [82742.03594771241, 84755.4966442953, 87671.12577639752, 83347.8145285935]} 
    p991 = {'ecmp0.3': [765159627, 1508305534, 903494999, 701576101], 'drill0.3': [983241327, 859055264, 1311768253, 651682907], 'drill0.4': [613606943, 1359964750, 1465404770, 1078481283], 'letflow0.4': [590060158, 1226015522, 1208545009, 956294097], 'clove0.4': [981452297, 1315024900, 1163285784, 926308661], 'letflow0.3': [763541790, 1691309462, 1176573351, 770025874], 'clove0.3': [771471445, 871427549, 1627777990, 872003502], 'ecmp0.4': [729433279, 1430509617, 1435252333, 901907081]}

    btms2 = {'ecmp0.5': [37492388.48582474, 51242529.34149484, 39772149.1126071, 20681270.598214287], 'drill0.6': [33263492.502590675, 32615339.676130388, 41994374.12839249, 73437282.82266527], 'drill': [], 'letflow': [], 'ecmp0.6': [31075906.259067357, 31033295.108307045, 37471737.04592902, 58936988.64113326], 'letflow0.5': [33306570.534793813, 53392098.328608245, 38294192.0624235, 20724477.049744897], 'clove0.6': [30573686.60207254, 29610572.36382755, 40868060.306889355, 62111587.572927594], 'clove': [], 'drill0.5': [38195364.797680415, 47260176.206185564, 41837655.67074663, 21484339.13392857], 'letflow0.6': [28575849.402072538, 29375371.079915877, 36058853.798538625, 65857674.451206714], 'ecmp': [], 'clove0.5': [30656221.44201031, 50130839.541237116, 42496162.28641371, 20811243.089285713]} 
    tops2 = {'ecmp0.5': [82857.79896907216, 88246.55798969071, 90286.81150550795, 83162.96428571429], 'drill0.6': [82813.13989637306, 82832.73606729758, 82828.8350730689, 83262.94648478489], 'drill': [], 'letflow': [], 'ecmp0.6': [85497.05595854922, 85299.94006309149, 85760.24634655533, 94482.13536201468], 'letflow0.5': [82952.40206185567, 86126.57731958762, 87078.13953488372, 83447.10841836735], 'clove0.6': [86583.09119170984, 84950.73080967403, 84291.34133611691, 100813.6610703043], 'clove': [], 'drill0.5': [82436.45360824742, 82872.39304123711, 83140.35618115055, 82819.0612244898], 'letflow0.6': [85271.08911917098, 84296.7476340694, 86155.14822546973, 98185.3242392445], 'ecmp': [], 'clove0.5': [82994.25386597938, 87072.47551546391, 89626.85556915545, 83707.48979591837]} 
    p992 = {'letflow0.5': [1034232605, 1663577141, 1120906027, 847017044], 'clove0.6': [935285658, 836677995, 1154187365, 1730899905], 'drill0.6': [974074927, 1060743973, 1006969597, 1947219902], 'ecmp0.5': [1208370880, 1355688998, 1059755498, 977188174], 'letflow0.6': [882250417, 872194937, 975833582, 1702954164], 'ecmp0.6': [892777114, 1093964198, 967173459, 1410452735], 'drill0.5': [1422979839, 1737791740, 1077025153, 788390275], 'clove0.5': [1050067702, 1739262750, 1099328703, 781218344]}
    modes = [ "letflow","ecmp", "drill", "clove","tianwu" ]
    
    btms3 = {'clove0.7': [38864558.44204852, 43072147.05212014, 41611706.01341682, 63280693.74381626], 'drill0.7': [45191633.289308175, 52703800.27120142, 53083975.64937388, 64560081.234982334], 'ecmp': [], 'clove': [], 'drill0.8': [49274710.452492215, 41669288.30329154, 57135647.020108275, 96418245.60550459], 'letflow0.8': [37817784.93457944, 36810929.580721006, 52992048.4679041, 89052693.73394495], 'ecmp0.8': [48967179.2741433, 36942638.69905956, 48047731.36194896, 91134551.92278287], 'ecmp0.7': [42195875.814914644, 42597912.50618374, 44014805.96690519, 59928209.50353357], 'letflow0.7': [44819168.812219225, 42882967.6475265, 43279691.07155635, 58621182.479681976], 'letflow': [], 'clove0.8': [37955525.89174455, 35761620.01410659, 54740194.1925754, 96181349.66743119], 'drill': []} 
    tops3 = {'clove0.7': [99051.63791554357, 95084.74204946996, 98213.60375670841, 103955.88869257951], 'drill0.7': [83359.57412398922, 83073.41784452296, 83392.54293381037, 83415.20494699647], 'ecmp': [], 'clove': [], 'drill0.8': [83482.72352024922, 83126.22805642633, 84233.17324052591, 84461.625382263], 'letflow0.8': [99808.90732087227, 92537.23589341693, 115481.08120649651, 122596.25535168196], 'ecmp0.8': [100433.64875389409, 91580.59169278997, 114135.00541376644, 124270.75917431193], 'ecmp0.7': [100329.0772686433, 94973.06802120141, 99366.26475849732, 101513.29416961131], 'letflow0.7': [101002.14375561546, 98013.43109540635, 98077.33720930232, 105435.33657243816], 'letflow': [], 'clove0.8': [100491.44236760125, 93095.09717868338, 110417.43078112915, 120584.44113149848], 'drill': []} 
    p993 = {'letflow0.8': [1190067291, 1312347753, 1847606925, 2000036981], 'drill0.7': [1376473177, 1685370279, 1493490699, 1533296279], 'clove0.7': [1078672261, 1407369577, 1179428543, 1721922180], 'drill0.8': [1327704518, 1476893515, 1423856218, 2163584797], 'letflow0.7': [1242245027, 1634671815, 1210690594, 1366973189], 'ecmp0.8': [1357429087, 1175548735, 1201893732, 2685297801], 'ecmp0.7': [1190906908, 1403945666, 1185418658, 1615199257], 'clove0.8': [1067405337, 1371432287, 1620463250, 3027547493]}
    # btms1 = {'ecmp0.7': [9163371.108108109, 4615949.166666667, 6014320.344827586, 6027911.162162162], 'letflow0.6': [5958036.545454546, 10560805.636363637, 9342037.666666666, 9007157.958333334], 'clove0.3': [7097268.125, 8662697.916666666, 7345078.947368421, 5719908.785714285], 'clove0.5': [3371313.1666666665, 7072327.476190476, 6648798.571428572, 11058195.318181818], 'clove': [], 'drill0.6': [5961552.7272727275, 10414107.636363637, 9316358.925925925, 9016830.041666666], 'ecmp0.5': [3371159.9, 7050769.666666667, 6647989.333333333, 11060708.863636363], 'clove0.4': [4320844.583333333, 6047334.947368421, 7038520.9, 6380603.722222222], 'letflow0.4': [4320844.583333333, 6044333.684210527, 7038520.9, 6380603.722222222], 'drill0.5': [3371313.1666666665, 7042303.761904762, 6644658.0, 11075633.227272727], 'letflow': [], 'ecmp': [], 'drill': [], 'drill0.3': [7097268.125, 8662697.916666666, 7334027.315789473, 5719908.785714285], 'letflow0.8': [10706543.514285713, 5384627.121212121, 5279156.388888889, 6815989.230769231], 'letflow0.3': [7097268.125, 8662697.916666666, 7334027.315789473, 5719908.785714285], 'letflow0.5': [3371709.6333333333, 7042303.761904762, 6647989.333333333, 11060665.863636363], 'clove0.8': [11060555.914285714, 5384008.212121212, 5280697.222222222, 6815786.0], 'clove0.7': [9203495.567567568, 4615949.166666667, 6137569.827586207, 6671069.702702703], 'ecmp0.4': [4320844.583333333, 6044333.684210527, 7038615.8, 6380603.722222222], 'drill0.4': [4320844.583333333, 6044333.684210527, 7038520.9, 6380603.722222222], 'drill0.7': [8895938.54054054, 4615948.5, 6137403.551724138, 6027911.162162162], 'ecmp0.8': [10661592.42857143, 5385546.303030303, 5279094.111111111, 6818903.128205128], 'ecmp0.3': [7103069.5, 8662697.916666666, 7334127.2105263155, 5719908.785714285], 'clove0.6': [5958028.545454546, 10560602.0, 9352495.148148147, 9007157.958333334], 'ecmp0.6': [5961552.7272727275, 10456446.606060605, 9342927.888888888, 9016830.041666666], 'letflow0.7': [9165575.243243244, 5124916.333333333, 6137403.551724138, 6027911.162162162], 'drill0.8': [10593071.085714286, 5380748.818181818, 5284020.194444444, 6815233.794871795]} 
    # tops1 = {'ecmp0.7': [214620.35135135136, 239482.33333333334, 244277.3103448276, 256445.54054054053], 'letflow0.6': [214327.51515151514, 262127.9393939394, 228183.37037037036, 278653.7916666667], 'clove0.3': [222651.9375, 196114.66666666666, 308504.15789473685, 274525.78571428574], 'clove0.5': [222322.0, 183531.61904761905, 216093.57142857142, 234664.54545454544], 'clove': [], 'drill0.6': [214252.63636363635, 262127.9393939394, 228183.37037037036, 278653.7916666667], 'ecmp0.5': [222327.73333333334, 183390.85714285713, 216093.57142857142, 234698.13636363635], 'clove0.4': [259283.58333333334, 175961.15789473685, 271594.45, 233261.27777777778], 'letflow0.4': [259283.58333333334, 175961.15789473685, 271603.05, 233261.27777777778], 'drill0.5': [222322.0, 183390.85714285713, 216093.57142857142, 234664.54545454544], 'letflow': [], 'ecmp': [], 'drill': [], 'drill0.3': [222651.9375, 196114.66666666666, 308493.7894736842, 274525.78571428574], 'letflow0.8': [216970.94285714286, 291848.1818181818, 199197.02777777778, 242043.46153846153], 'letflow0.3': [222651.9375, 196114.66666666666, 308493.7894736842, 274525.78571428574], 'letflow0.5': [222563.93333333332, 183390.85714285713, 216093.57142857142, 234664.54545454544], 'clove0.8': [216970.94285714286, 293178.1515151515, 199197.02777777778, 242043.46153846153], 'clove0.7': [212146.35135135136, 239482.33333333334, 244277.3103448276, 256424.1081081081], 'ecmp0.4': [259283.58333333334, 175961.15789473685, 271695.7, 233261.27777777778], 'drill0.4': [259283.58333333334, 175961.15789473685, 271594.45, 233261.27777777778], 'drill0.7': [212118.62162162163, 239513.73333333334, 244277.3103448276, 256424.1081081081], 'ecmp0.8': [216970.94285714286, 291884.0, 199210.91666666666, 243375.89743589744], 'ecmp0.3': [222651.9375, 196114.66666666666, 308584.05263157893, 274525.78571428574], 'clove0.6': [214252.63636363635, 262135.75757575757, 228546.88888888888, 278653.7916666667], 'ecmp0.6': [214252.63636363635, 262243.7272727273, 228545.2962962963, 278653.7916666667], 'letflow0.7': [212150.8108108108, 239482.33333333334, 244277.3103448276, 256445.54054054053], 'drill0.8': [216980.77142857143, 291883.2121212121, 199165.69444444444, 242043.46153846153]} 
    # p991 = {'ecmp0.7': [27876532, 6191048, 17316365, 18474010], 'letflow0.6': [11723003, 24424194, 25376738, 21837328], 'clove0.3': [21166599, 24196025, 22202716, 13296462], 'clove0.5': [7076393, 24196025, 17316365, 21837328], 'clove0.6': [11723003, 24424194, 25506802, 21837328], 'drill0.6': [11784853, 24424194, 25376738, 21837328], 'ecmp0.5': [7076393, 24196025, 17316365, 21837328], 'clove0.4': [7076393, 24224537, 22202716, 18474010], 'ecmp0.6': [11784853, 24424194, 25376738, 21837328], 'drill0.5': [7076393, 24196025, 17316365, 21837328], 'letflow0.4': [7076393, 24196025, 22202716, 18474010], 'drill0.3': [21166599, 24196025, 22202716, 13296462], 'letflow0.8': [24368494, 19207505, 8762508, 18932820], 'letflow0.3': [21166599, 24196025, 22202716, 13296462], 'letflow0.5': [7076740, 24196025, 17316365, 21837328], 'clove0.8': [28627425, 19235520, 8762508, 18932820], 'clove0.7': [24431225, 6191048, 17318776, 20982690], 'ecmp0.4': [7076393, 24196025, 22202716, 18474010], 'drill0.4': [7076393, 24196025, 22202716, 18474010], 'drill0.7': [24368494, 6191048, 17316365, 18474010], 'ecmp0.8': [28620582, 19207505, 8762508, 18932820], 'ecmp0.3': [21166599, 24196025, 22202716, 13296462], 'letflow0.7': [27876532, 9145630, 17316365, 18474010], 'drill0.8': [24431225, 19207505, 8793817, 18932820]}
    
    ans = {}
    for m in modes:
        ans[m] = [0,0,0,0,0,0]
        
    # for a in  [tops1, btms1, p991, tops2, btms2, p992 ]:
    # for a in  [tops1, tops2 ]:
    # for a in  [btms1, btms2 ]:
    for a in  [btms1, btms2, btms3 ]:
        for b in a.keys():
            if not len(a[b]) == 0:
                
                cur = sum(a[b])/len(a[b])
                a[b] = cur
                for m in modes:
                    if m in b and not m==b:
                        ans[m][int(b[-1])-3]=a[b]
                        
                
    print(ans)
 
    
    
    x = [30,40,50,60,70,80]
    x_major_locator=MultipleLocator(4)
    # print(y3)
    sns.set_style("whitegrid")
    matplotlib.rcParams.update({'font.size': 20, "font.weight": "bold"}) 
    plt.xticks(None, weight='bold')
    plt.xlim((30, 80))
    
    # my_x_ticks = np.arange(40, 81, 10)
    # my_y_ticks = np.arange(-2, 2, 0.3)
    # plt.xticks(my_x_ticks,weight='bold')
    
    y_major_locator=MultipleLocator(4000000)
    ax=plt.gca()
    ax.yaxis.set_major_locator(y_major_locator)

    
    plt.ylim(12000000,24000000)
    
    # my_y_ticks = np.arange(-1500000000, 1500000000, 150000000)
    # plt.yticks(my_y_ticks)
    shapes = ["ro-", "g*-", "k^-", "ys-", "bp-"]
    for i, mode in enumerate(modes):
        plt.plot(x, ans[mode], shapes[i], label=mode, linewidth=2.5, markersize=8)
        
    # plt.plot(x, y99, 'ro-', label='ECMP', linewidth=2.5, markersize=8)
    # plt.plot(x, y991, 'g*-', label='LetFlow', linewidth=2.5, markersize=8)
    # plt.plot(x, y992, 'b^-', label='DRILL', linewidth=2.5, markersize=8)
    # plt.plot(x, y993, 'ys-', label='LFB', linewidth=2.5, markersize=8)
    
    # plt.plot(x, y50, 'ro-', label='ECMP', linewidth=2.5, markersize=8)
    # plt.plot(x, y501, 'g*-', label='LetFlow', linewidth=2.5, markersize=8)
    # plt.plot(x, y502, 'b^-', label='DRILL', linewidth=2.5, markersize=8)
    # plt.plot(x, y503, 'ys-', label='LFB', linewidth=2.5, markersize=8)
    # fig = plt.figure()
    # ax = fig.add_subplot(1, 1, 1, projection='scatter_density')
    
    # norm = mcolors.TwoSlopeNorm(vcenter=0)   
    # density = ax.scatter_density(xe, ecmp,norm=norm, cmap=plt.cm.RdBu)
    # ax.set_xlim(min(xe), max(xe))
    # ax.set_ylim(min(ecmp), max(ecmp))
    # fig.colorbar(density, label='Number of points per pixel')
    # fig.savefig('gaussian_color_coded.png')
    
    # plt.hist((np.array(xe), np.array(ecmp)))
    

    # plt.xlabel('link offered load %', weight="bold")
    # plt.ylabel('FCT(ns)', weight="bold")
    plt.legend(loc='upper left', fontsize="x-small" )
    plt.tight_layout()
    # plt.show()
    plt.savefig("fctop.png")
    
    # tps = []
    # btms = []
    # p99s = []
    # for a in tops1.keys():
        